<a class="close-popup" mat-dialog-close>
  <mat-icon class="close-icon" color="warn">close</mat-icon>
</a>
<h2 mat-dialog-title>
  {{ titlePopup | translate }}
</h2>
<mat-dialog-content class="mat-typography">
  <mat-accordion>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ 'briefcase.detail' | translate }}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mat-dialog-content style="overflow: hidden;">
        <form [formGroup]="formDetail" class="form-field-full readonly">
          <div fxLayout="row wrap" fxLayoutGap="20px grid">
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.type_custommer' | translate }}</mat-label>
                <input matInput formControlName="custTypeId" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.code_custommer' | translate }}</mat-label>
                <input matInput formControlName="custId" readonly />
              </mat-form-field>
            </div>
          </div>
          <div fxLayout="row wrap" fxLayoutGap="20px grid">
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.name' | translate }}</mat-label>
                <input matInput formControlName="custName" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.date_of_birth' | translate }}</mat-label>
                <input matInput formControlName="birthDate" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.sex' | translate }}</mat-label>
                <input matInput formControlName="gender" readonly />
              </mat-form-field>
            </div>
          </div>
          <div fxLayout="row wrap" fxLayoutGap="20px grid">
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.identity_card' | translate }}</mat-label>
                <input matInput formControlName="documentNumber" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.date_issue' | translate }}</mat-label>
                <input matInput formControlName="dateOfIssue" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.address_issue' | translate }}</mat-label>
                <input matInput formControlName="placeOfIssue" readonly />
              </mat-form-field>
            </div>
          </div>
        </form>
      </mat-dialog-content>
    </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion>
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ 'briefcase.address_tbc' | translate }}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mat-dialog-content style="overflow: hidden;">
        <form [formGroup]="formDetailTcb" class="form-field-full readonly">
          <div fxLayout="row wrap" fxLayoutGap="20px grid">
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.province' | translate }}</mat-label>
                <input matInput formControlName="province" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.district' | translate }}</mat-label>
                <input matInput formControlName="district" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.villge' | translate }}</mat-label>
                <input matInput formControlName="areaName" readonly />
              </mat-form-field>
            </div>
          </div>
          <div fxLayout="row wrap" fxLayoutGap="20px grid">
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.street' | translate }}</mat-label>
                <input matInput formControlName="noticeStreet" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="66.67" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.address_full' | translate }}</mat-label>
                <input matInput formControlName="noticeAreaName" readonly />
              </mat-form-field>
            </div>
          </div>
          <div fxLayout="row wrap" fxLayoutGap="20px grid">
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.phone' | translate }}</mat-label>
                <input matInput formControlName="noticePhoneNumber" readonly />
              </mat-form-field>
            </div>
            <div fxFlex="33.33" fxFlex.lt-sm="100">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'briefcase.email' | translate }}</mat-label>
                <input matInput formControlName="noticeEmail" readonly />
              </mat-form-field>
            </div>
          </div>
        </form>
      </mat-dialog-content>
    </mat-expansion-panel>
  </mat-accordion>
  <!-- danh sách chứng từ đính kèm hồ sơ -->
  <mat-card>
    <crm-table [headerTable]="'briefcase.attach_doc'" [dataSource]="dataSourceDetail" [isLoading]="isLoading"
      [isPaging]="true" [totalRecord]="totalRecord" [displayedColumns]="displayedColumns"
      (onPage)="onPageChange($event)">
      <ng-container *ngFor="let item of columns" [ngSwitch]="item.field">
        <ng-container matColumnDef="{{ item.field }}" *ngSwitchDefault>
          <th mat-header-cell *matHeaderCellDef>{{ item.i18n | translate }}</th>
          <td mat-cell *matCellDef="let row">
            {{ row[item.field] }}
          </td>
        </ng-container>
        <ng-container matColumnDef="{{ item.field }}" *ngSwitchCase="'orderNumber'">
          <th mat-header-cell *matHeaderCellDef>{{ item.i18n | translate }}</th>
          <td mat-cell *matCellDef="let row; let i = dataIndex" class="ui-text-center">
            {{ i + 1 + searchModel.startrecord }}
          </td>
        </ng-container>
        <ng-container matColumnDef="{{ item.field }}" *ngSwitchCase="'status'">
          <th mat-header-cell *matHeaderCellDef>{{ item.i18n | translate }}</th>
          <td mat-cell *matCellDef="let row" class="ui-text-center">
            <span *ngIf="row.status == statusContractProfile.CT_DACO">{{
              'briefcase.profileExisted' | translate
            }}</span>
            <span *ngIf="row.status == statusContractProfile.CT_THIEU">{{
              'briefcase.ct_missing' | translate
            }}</span>
            <span *ngIf="row.status == statusContractProfile.CT_GIAMAO">{{
              'briefcase.profileFake' | translate
            }}</span>
          </td>
        </ng-container>
        <ng-container matColumnDef="{{ item.field }}" *ngSwitchCase="'download'">
          <th mat-header-cell *matHeaderCellDef>{{ item.i18n | translate }}</th>
          <td mat-cell *matCellDef="let row">
            <button mat-icon-button color="primary" (click)="clickDowload(row)">
              <mat-icon class="mat-18">get_app</mat-icon>
            </button>
          </td>
        </ng-container>
      </ng-container>
    </crm-table>
  </mat-card>
  <mat-tab-group (selectedIndexChange)="currentIndex = $event">
    <mat-tab *ngFor="let item of dataModel.dataSourceWithRFID; let index = index" label="{{ item.plateNumber }}">
      <table-detail-vehicle-tab [vehicleId]="item.vehicleId" *ngIf="currentIndex == index">
      </table-detail-vehicle-tab>
    </mat-tab>
  </mat-tab-group>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <div fxLayout.xs="column" fxLayoutAlign="flex-end" fxLayoutGap="10px" fxLayoutGap.xs="0"
    style="margin-right: 8px; width: 100%;">
    <button mat-raised-button type="button" color="secondary" mat-dialog-close style="float: right;">
      {{ 'common.button.close' | translate }}
    </button>
  </div>
</mat-dialog-actions>
